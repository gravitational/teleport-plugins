apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: roles.resources.teleport.dev
spec:
  group: resources.teleport.dev
  names:
    kind: Role
    listKind: RoleList
    plural: roles
    singular: role
  scope: Namespaced
  versions:
  - name: v5
    schema:
      openAPIV3Schema:
        description: Role is the Schema for the roles API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Role resource definition v5 from Teleport
            properties:
              allow:
                description: Allow is the set of conditions evaluated to grant access.
                properties:
                  app_labels:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: AppLabels is a map of labels used as part of the
                      RBAC system.
                    type: object
                  aws_role_arns:
                    description: AWSRoleARNs is a list of AWS role ARNs this role
                      is allowed to assume.
                    items:
                      type: string
                    nullable: true
                    type: array
                  cluster_labels:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: ClusterLabels is a map of node labels (used to dynamically
                      grant access to clusters).
                    type: object
                  db_labels:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: DatabaseLabels are used in RBAC system to allow/deny
                      access to databases.
                    type: object
                  db_names:
                    description: DatabaseNames is a list of database names this role
                      is allowed to connect to.
                    items:
                      type: string
                    nullable: true
                    type: array
                  db_users:
                    description: DatabaseUsers is a list of databaes users this role
                      is allowed to connect as.
                    items:
                      type: string
                    nullable: true
                    type: array
                  impersonate:
                    description: Impersonate specifies what users and roles this role
                      is allowed to impersonate by issuing certificates or other possible
                      means.
                    nullable: true
                    properties:
                      roles:
                        description: Roles is a list of resources this role is allowed
                          to impersonate
                        items:
                          type: string
                        nullable: true
                        type: array
                      users:
                        description: Users is a list of resources this role is allowed
                          to impersonate, could be an empty list or a Wildcard pattern
                        items:
                          type: string
                        nullable: true
                        type: array
                      where:
                        description: Where specifies optional advanced matcher
                        type: string
                    type: object
                  join_sessions:
                    description: JoinSessions specifies policies to allow users to
                      join other sessions.
                    items:
                      properties:
                        kinds:
                          description: Kinds are the session kinds this policy applies
                            to.
                          items:
                            type: string
                          nullable: true
                          type: array
                        modes:
                          description: Modes is a list of permitted participant modes
                            for this policy.
                          items:
                            type: string
                          nullable: true
                          type: array
                        name:
                          description: Name is the name of the policy.
                          type: string
                        roles:
                          description: Roles is a list of roles that you can join
                            the session of.
                          items:
                            type: string
                          nullable: true
                          type: array
                      type: object
                    nullable: true
                    type: array
                  kubernetes_groups:
                    description: KubeGroups is a list of kubernetes groups
                    items:
                      type: string
                    nullable: true
                    type: array
                  kubernetes_labels:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: KubernetesLabels is a map of kubernetes cluster labels
                      used for RBAC.
                    type: object
                  kubernetes_users:
                    description: KubeUsers is an optional kubernetes users to impersonate
                    items:
                      type: string
                    nullable: true
                    type: array
                  logins:
                    description: Logins is a list of *nix system logins.
                    items:
                      type: string
                    nullable: true
                    type: array
                  node_labels:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: NodeLabels is a map of node labels (used to dynamically
                      grant access to nodes).
                    type: object
                  request:
                    nullable: true
                    properties:
                      annotations:
                        additionalProperties:
                          items:
                            type: string
                          type: array
                        description: Annotations is a collection of annotations to
                          be programmatically appended to pending access requests
                          at the time of their creation. These annotations serve as
                          a mechanism to propagate extra information to plugins.  Since
                          these annotations support variable interpolation syntax,
                          they also offer a mechanism for forwarding claims from an
                          external identity provider, to a plugin via `{{external.trait_name}}`
                          style substitutions.
                        type: object
                      claims_to_roles:
                        description: ClaimsToRoles specifies a mapping from claims
                          (traits) to teleport roles.
                        items:
                          properties:
                            claim:
                              description: Claim is a claim name.
                              type: string
                            roles:
                              description: Roles is a list of static teleport roles
                                to match.
                              items:
                                type: string
                              nullable: true
                              type: array
                            value:
                              description: Value is a claim value to match.
                              type: string
                          type: object
                        type: array
                      roles:
                        description: Roles is the name of roles which will match the
                          request rule.
                        items:
                          type: string
                        nullable: true
                        type: array
                      suggested_reviewers:
                        description: SuggestedReviewers is a list of reviewer suggestions.  These
                          can be teleport usernames, but that is not a requirement.
                        items:
                          type: string
                        nullable: true
                        type: array
                      thresholds:
                        description: Thresholds is a list of thresholds, one of which
                          must be met in order for reviews to trigger a state-transition.  If
                          no thresholds are provided, a default threshold of 1 for
                          approval and denial is used.
                        items:
                          properties:
                            approve:
                              description: Approve is the number of matching approvals
                                needed for state-transition.
                              format: int32
                              type: integer
                            deny:
                              description: Deny is the number of denials needed for
                                state-transition.
                              format: int32
                              type: integer
                            filter:
                              description: Filter is an optional predicate used to
                                determine which reviews count toward this threshold.
                              type: string
                            name:
                              description: Name is the optional human-readable name
                                of the threshold.
                              type: string
                          type: object
                        type: array
                    type: object
                  require_session_join:
                    description: RequireSessionJoin specifies policies for required
                      users to start a session.
                    items:
                      properties:
                        count:
                          description: Count is the amount of people that need to
                            be matched for this policy to be fulfilled.
                          format: int32
                          type: integer
                        filter:
                          description: Filter is a predicate that determines what
                            users count towards this policy.
                          type: string
                        kinds:
                          description: Kinds are the session kinds this policy applies
                            to.
                          items:
                            type: string
                          nullable: true
                          type: array
                        modes:
                          description: Modes is the list of modes that may be used
                            to fulfill this policy.
                          items:
                            type: string
                          nullable: true
                          type: array
                        name:
                          description: Name is the name of the policy.
                          type: string
                        on_leave:
                          description: OnLeave is the behaviour that's used when the
                            policy is no longer fulfilled for a live session.
                          type: string
                      type: object
                    nullable: true
                    type: array
                  review_requests:
                    description: ReviewRequests defines conditions for submitting
                      access reviews.
                    nullable: true
                    properties:
                      claims_to_roles:
                        description: ClaimsToRoles specifies a mapping from claims
                          (traits) to teleport roles.
                        items:
                          properties:
                            claim:
                              description: Claim is a claim name.
                              type: string
                            roles:
                              description: Roles is a list of static teleport roles
                                to match.
                              items:
                                type: string
                              nullable: true
                              type: array
                            value:
                              description: Value is a claim value to match.
                              type: string
                          type: object
                        type: array
                      roles:
                        description: Roles is the name of roles which may be reviewed.
                        items:
                          type: string
                        nullable: true
                        type: array
                      where:
                        description: Where is an optional predicate which further
                          limits which requests are reviewable.
                        type: string
                    type: object
                  rules:
                    description: Rules is a list of rules and their access levels.
                      Rules are a high level construct used for access control.
                    items:
                      properties:
                        actions:
                          description: Actions specifies optional actions taken when
                            this rule matches
                          items:
                            type: string
                          nullable: true
                          type: array
                        resources:
                          description: Resources is a list of resources
                          items:
                            type: string
                          nullable: true
                          type: array
                        verbs:
                          description: Verbs is a list of verbs
                          items:
                            type: string
                          nullable: true
                          type: array
                        where:
                          description: Where specifies optional advanced matcher
                          type: string
                      type: object
                    type: array
                  windows_desktop_labels:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: WindowsDesktopLabels are used in the RBAC system
                      to allow/deny access to Windows desktops.
                    type: object
                  windows_desktop_logins:
                    description: WindowsDesktopLogins is a list of desktop login names
                      allowed/denied for Windows desktops.
                    items:
                      type: string
                    nullable: true
                    type: array
                type: object
              deny:
                description: Deny is the set of conditions evaluated to deny access.
                  Deny takes priority over allow.
                properties:
                  app_labels:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: AppLabels is a map of labels used as part of the
                      RBAC system.
                    type: object
                  aws_role_arns:
                    description: AWSRoleARNs is a list of AWS role ARNs this role
                      is allowed to assume.
                    items:
                      type: string
                    nullable: true
                    type: array
                  cluster_labels:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: ClusterLabels is a map of node labels (used to dynamically
                      grant access to clusters).
                    type: object
                  db_labels:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: DatabaseLabels are used in RBAC system to allow/deny
                      access to databases.
                    type: object
                  db_names:
                    description: DatabaseNames is a list of database names this role
                      is allowed to connect to.
                    items:
                      type: string
                    nullable: true
                    type: array
                  db_users:
                    description: DatabaseUsers is a list of databaes users this role
                      is allowed to connect as.
                    items:
                      type: string
                    nullable: true
                    type: array
                  impersonate:
                    description: Impersonate specifies what users and roles this role
                      is allowed to impersonate by issuing certificates or other possible
                      means.
                    nullable: true
                    properties:
                      roles:
                        description: Roles is a list of resources this role is allowed
                          to impersonate
                        items:
                          type: string
                        nullable: true
                        type: array
                      users:
                        description: Users is a list of resources this role is allowed
                          to impersonate, could be an empty list or a Wildcard pattern
                        items:
                          type: string
                        nullable: true
                        type: array
                      where:
                        description: Where specifies optional advanced matcher
                        type: string
                    type: object
                  join_sessions:
                    description: JoinSessions specifies policies to allow users to
                      join other sessions.
                    items:
                      properties:
                        kinds:
                          description: Kinds are the session kinds this policy applies
                            to.
                          items:
                            type: string
                          nullable: true
                          type: array
                        modes:
                          description: Modes is a list of permitted participant modes
                            for this policy.
                          items:
                            type: string
                          nullable: true
                          type: array
                        name:
                          description: Name is the name of the policy.
                          type: string
                        roles:
                          description: Roles is a list of roles that you can join
                            the session of.
                          items:
                            type: string
                          nullable: true
                          type: array
                      type: object
                    nullable: true
                    type: array
                  kubernetes_groups:
                    description: KubeGroups is a list of kubernetes groups
                    items:
                      type: string
                    nullable: true
                    type: array
                  kubernetes_labels:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: KubernetesLabels is a map of kubernetes cluster labels
                      used for RBAC.
                    type: object
                  kubernetes_users:
                    description: KubeUsers is an optional kubernetes users to impersonate
                    items:
                      type: string
                    nullable: true
                    type: array
                  logins:
                    description: Logins is a list of *nix system logins.
                    items:
                      type: string
                    nullable: true
                    type: array
                  node_labels:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: NodeLabels is a map of node labels (used to dynamically
                      grant access to nodes).
                    type: object
                  request:
                    nullable: true
                    properties:
                      annotations:
                        additionalProperties:
                          items:
                            type: string
                          type: array
                        description: Annotations is a collection of annotations to
                          be programmatically appended to pending access requests
                          at the time of their creation. These annotations serve as
                          a mechanism to propagate extra information to plugins.  Since
                          these annotations support variable interpolation syntax,
                          they also offer a mechanism for forwarding claims from an
                          external identity provider, to a plugin via `{{external.trait_name}}`
                          style substitutions.
                        type: object
                      claims_to_roles:
                        description: ClaimsToRoles specifies a mapping from claims
                          (traits) to teleport roles.
                        items:
                          properties:
                            claim:
                              description: Claim is a claim name.
                              type: string
                            roles:
                              description: Roles is a list of static teleport roles
                                to match.
                              items:
                                type: string
                              nullable: true
                              type: array
                            value:
                              description: Value is a claim value to match.
                              type: string
                          type: object
                        type: array
                      roles:
                        description: Roles is the name of roles which will match the
                          request rule.
                        items:
                          type: string
                        nullable: true
                        type: array
                      suggested_reviewers:
                        description: SuggestedReviewers is a list of reviewer suggestions.  These
                          can be teleport usernames, but that is not a requirement.
                        items:
                          type: string
                        nullable: true
                        type: array
                      thresholds:
                        description: Thresholds is a list of thresholds, one of which
                          must be met in order for reviews to trigger a state-transition.  If
                          no thresholds are provided, a default threshold of 1 for
                          approval and denial is used.
                        items:
                          properties:
                            approve:
                              description: Approve is the number of matching approvals
                                needed for state-transition.
                              format: int32
                              type: integer
                            deny:
                              description: Deny is the number of denials needed for
                                state-transition.
                              format: int32
                              type: integer
                            filter:
                              description: Filter is an optional predicate used to
                                determine which reviews count toward this threshold.
                              type: string
                            name:
                              description: Name is the optional human-readable name
                                of the threshold.
                              type: string
                          type: object
                        type: array
                    type: object
                  require_session_join:
                    description: RequireSessionJoin specifies policies for required
                      users to start a session.
                    items:
                      properties:
                        count:
                          description: Count is the amount of people that need to
                            be matched for this policy to be fulfilled.
                          format: int32
                          type: integer
                        filter:
                          description: Filter is a predicate that determines what
                            users count towards this policy.
                          type: string
                        kinds:
                          description: Kinds are the session kinds this policy applies
                            to.
                          items:
                            type: string
                          nullable: true
                          type: array
                        modes:
                          description: Modes is the list of modes that may be used
                            to fulfill this policy.
                          items:
                            type: string
                          nullable: true
                          type: array
                        name:
                          description: Name is the name of the policy.
                          type: string
                        on_leave:
                          description: OnLeave is the behaviour that's used when the
                            policy is no longer fulfilled for a live session.
                          type: string
                      type: object
                    nullable: true
                    type: array
                  review_requests:
                    description: ReviewRequests defines conditions for submitting
                      access reviews.
                    nullable: true
                    properties:
                      claims_to_roles:
                        description: ClaimsToRoles specifies a mapping from claims
                          (traits) to teleport roles.
                        items:
                          properties:
                            claim:
                              description: Claim is a claim name.
                              type: string
                            roles:
                              description: Roles is a list of static teleport roles
                                to match.
                              items:
                                type: string
                              nullable: true
                              type: array
                            value:
                              description: Value is a claim value to match.
                              type: string
                          type: object
                        type: array
                      roles:
                        description: Roles is the name of roles which may be reviewed.
                        items:
                          type: string
                        nullable: true
                        type: array
                      where:
                        description: Where is an optional predicate which further
                          limits which requests are reviewable.
                        type: string
                    type: object
                  rules:
                    description: Rules is a list of rules and their access levels.
                      Rules are a high level construct used for access control.
                    items:
                      properties:
                        actions:
                          description: Actions specifies optional actions taken when
                            this rule matches
                          items:
                            type: string
                          nullable: true
                          type: array
                        resources:
                          description: Resources is a list of resources
                          items:
                            type: string
                          nullable: true
                          type: array
                        verbs:
                          description: Verbs is a list of verbs
                          items:
                            type: string
                          nullable: true
                          type: array
                        where:
                          description: Where specifies optional advanced matcher
                          type: string
                      type: object
                    type: array
                  windows_desktop_labels:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: WindowsDesktopLabels are used in the RBAC system
                      to allow/deny access to Windows desktops.
                    type: object
                  windows_desktop_logins:
                    description: WindowsDesktopLogins is a list of desktop login names
                      allowed/denied for Windows desktops.
                    items:
                      type: string
                    nullable: true
                    type: array
                type: object
              options:
                description: Options is for OpenSSH options like agent forwarding.
                properties:
                  cert_extensions:
                    description: CertExtensions specifies the key/values
                    items:
                      properties:
                        mode:
                          description: Mode is the type of extension to be used --
                            currently critical-option is not supported
                          format: int32
                          type: integer
                        name:
                          description: Name specifies the key to be used in the cert
                            extension.
                          type: string
                        type:
                          description: Type represents the certificate type being
                            extended, only ssh is supported at this time.
                          format: int32
                          type: integer
                        value:
                          description: Value specifies the valueg to be used in the
                            cert extension.
                          type: string
                      type: object
                    nullable: true
                    type: array
                  cert_format:
                    description: CertificateFormat defines the format of the user
                      certificate to allow compatibility with older versions of OpenSSH.
                    type: string
                  client_idle_timeout:
                    description: ClientIdleTimeout sets disconnect clients on idle
                      timeout behavior, if set to 0 means do not disconnect, otherwise
                      is set to the idle duration.
                    format: duration
                    type: string
                  desktop_clipboard:
                    description: DesktopClipboard indicates whether clipboard sharing
                      is allowed between the user's workstation and the remote desktop.
                      It defaults to true unless explicitly set to false.
                    type: boolean
                  disconnect_expired_cert:
                    description: DisconnectExpiredCert sets disconnect clients on
                      expired certificates.
                    type: boolean
                  enhanced_recording:
                    description: BPF defines what events to record for the BPF-based
                      session recorder.
                    items:
                      type: string
                    nullable: true
                    type: array
                  forward_agent:
                    description: ForwardAgent is SSH agent forwarding.
                    type: boolean
                  lock:
                    description: Lock specifies the locking mode (strict|best_effort)
                      to be applied with the role.
                    type: string
                  max_connections:
                    description: MaxConnections defines the maximum number of concurrent
                      connections a user may hold.
                    format: int64
                    type: integer
                  max_kubernetes_connections:
                    description: MaxKubernetesConnections defines the maximum number
                      of concurrent Kubernetes sessions a user may hold.
                    format: int64
                    type: integer
                  max_session_ttl:
                    description: MaxSessionTTL defines how long a SSH session can
                      last for.
                    format: duration
                    type: string
                  max_sessions:
                    description: MaxSessions defines the maximum number of concurrent
                      sessions per connection.
                    format: int64
                    type: integer
                  permit_x11_forwarding:
                    description: PermitX11Forwarding authorizes use of X11 forwarding.
                    type: boolean
                  port_forwarding:
                    description: PortForwarding defines if the certificate will have
                      "permit-port-forwarding" in the certificate. PortForwarding
                      is "yes" if not set, that's why this is a pointer
                    type: boolean
                  record_session:
                    description: RecordDesktopSession indicates whether desktop access
                      sessions should be recorded. It defaults to true unless explicitly
                      set to false.
                    nullable: true
                    properties:
                      desktop:
                        description: Desktop indicates whether desktop sessions should
                          be recorded. It defaults to true unless explicitly set to
                          false.
                        type: boolean
                    type: object
                  request_access:
                    description: RequestAccess defines the access request stategy
                      (optional|note|always) where optional is the default.
                    type: string
                  request_prompt:
                    description: RequestPrompt is an optional message which tells
                      users what they aught to
                    type: string
                  require_session_mfa:
                    description: RequireSessionMFA specifies whether a user is required
                      to do an MFA check for every session.
                    type: boolean
                type: object
            type: object
          status:
            description: Role resource status
            properties:
              lastError:
                properties:
                  kind:
                    description: Error kind
                    type: string
                  text:
                    description: Error text
                    type: string
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: null
  storedVersions: null
